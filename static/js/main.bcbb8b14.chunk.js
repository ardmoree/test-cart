(this["webpackJsonptest-cart"]=this["webpackJsonptest-cart"]||[]).push([[0],{45:function(e,t,c){},47:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(17),r=c.n(n),i=c(10),s="FETCH_CART",d="SET_CART",o="ADD_TO_CART",l="DELETE_FROM_CART",u="CHANGE_QUANTITY",j="CART_LOADING_TOGGLE",b=function(e){return{type:j,payload:e}},m=function(e){return{type:u,payload:e}},O=(c(45),c(3)),p=Object(i.b)((function(e,t){return{item:e.cartItems.find((function(e){return e.id===t.element.id}))}}))((function(e){var t=e.element,c=e.item,a=e.dispatch;return Object(O.jsxs)("div",{className:"item",children:[Object(O.jsxs)("div",{className:"imgContainer",children:[t.pic&&Object(O.jsx)("img",{src:t.pic,alt:""}),!t.pic&&Object(O.jsx)("div",{className:"noPic",children:"Image will be added shortly"})]}),Object(O.jsx)("div",{className:"itemName",children:t.name}),Object(O.jsxs)("div",{className:"rightSide",children:[Object(O.jsxs)("div",{className:"controls",children:[Object(O.jsx)("button",{className:"button",onClick:function(){c.quantity>0&&a(m({id:t.id,change:-1,price:t.price}))},disabled:c.quantity<=0,children:"-"}),Object(O.jsx)("div",{className:"counter",children:c.quantity}),Object(O.jsx)("button",{className:"button",onClick:function(){a(m({id:t.id,change:1,price:t.price}))},children:"+"})]}),Object(O.jsxs)("div",{className:"total",children:["$",(c.quantity*t.price).toFixed(2)]}),Object(O.jsx)("button",{className:"remove",onClick:function(){var e;a((e={id:t.id,quantity:c.quantity,price:t.price},{type:l,payload:e}))},children:"Remove"})]})]})})),h=(c(47),function(e){var t=e.items;return Object(O.jsx)("div",{className:"itemList",children:t.map((function(e){return Object(O.jsx)(p,{element:e},e.id)}))})}),x=c(33),f=(c(49),function(e){var t=e.label,c=void 0===t?"":t,a=e.type,n=void 0===a?"string":a,r=e.disabled,i=void 0!==r&&r,s=e.register,d=e.required,o=void 0!==d&&d;return Object(O.jsx)("input",{className:"input",placeholder:c,name:c,type:n,disabled:i,ref:s({required:o})})}),v=(c(50),Object(i.b)()((function(e){var t=e.dispatch,c=Object(x.a)(),a=c.register,n=c.handleSubmit;return Object(O.jsxs)("form",{className:"newItemForm",onSubmit:n((function(e){t({type:o,payload:e})})),children:[Object(O.jsx)("div",{className:"field",children:Object(O.jsx)(f,{label:"name",register:a,required:!0})}),Object(O.jsx)("div",{className:"field",children:Object(O.jsx)(f,{label:"quantity",register:a,required:!0})}),Object(O.jsx)("div",{className:"field",children:Object(O.jsx)(f,{label:"price",register:a,required:!0})}),Object(O.jsx)("button",{className:"submitButton",children:"Add new product"})]})}))),y=(c(51),Object(i.b)((function(e){return{total:e.total}}))((function(e){var t=e.total;return Object(O.jsxs)("div",{className:"checkout",children:[Object(O.jsx)("div",{className:"checkoutTotal",children:"Total:"}),Object(O.jsxs)("div",{className:"number",children:["$",t]}),Object(O.jsx)("button",{className:"checkoutButton",children:"CHECKOUT"})]})}))),N=(c(52),Object(i.b)((function(e){return{items:e.cartItems,loading:e.cartLoading}}))((function(e){var t=e.items,c=e.loading,n=Object(i.c)();return Object(a.useEffect)((function(){n({type:s})}),[]),Object(O.jsxs)("div",{className:"shoppingCart",children:[Object(O.jsx)("div",{className:"header",children:"SHOPPING CART"}),Object(O.jsxs)("div",{className:"midSection",children:[t.length>0&&!c&&Object(O.jsx)(h,{items:t}),!c&&0===t.length&&Object(O.jsx)("div",{className:"emptyCart",children:"No items in cart"}),c&&Object(O.jsx)("div",{className:"loading",children:"Loading ..."}),Object(O.jsx)(y,{})]}),Object(O.jsx)(v,{})]})}))),g=function(){return Object(O.jsx)("div",{className:"App",style:{height:"100vh",backgroundColor:"#edf3f9"},children:Object(O.jsx)(N,{})})},C=c(13),q=c(34),I=c(5),T=c.n(I),k=c(15),w=c(32),A=c.n(w),E=T.a.mark(L),_=T.a.mark(R),F=T.a.mark(S);function L(){var e;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.b)(b(!0));case 2:return t.next=4,A.a.get("./server/db.json").then((function(e){return e}));case 4:if(200===(e=t.sent).status){t.next=9;break}console.log("Couldn't get cart items"),t.next=13;break;case 9:return t.next=11,Object(k.b)(b(!1));case 11:return t.next=13,Object(k.b)((c=e.data.items,{type:d,payload:c}));case 13:case"end":return t.stop()}var c}),E)}function R(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.c)(s,L);case 2:case"end":return e.stop()}}),_)}function S(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)([R()]);case 2:case"end":return e.stop()}}),F)}var G=c(6),D=c(8),H={cartItems:[],cartLoading:!1,total:0},B=Object(q.a)(),P=Object(C.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var c=0;return t.payload.forEach((function(e){c+=e.quantity*e.price})),Object(D.a)(Object(D.a)({},e),{},{cartItems:t.payload,total:c.toFixed(2)});case j:return Object(D.a)(Object(D.a)({},e),{},{cartLoading:t.payload});case o:var a=Object(D.a)(Object(D.a)({},t.payload),{},{id:Math.random()});return Object(D.a)(Object(D.a)({},e),{},{total:(Number(e.total)+t.payload.price*t.payload.quantity).toFixed(2),cartItems:[a].concat(Object(G.a)(e.cartItems))});case l:return Object(D.a)(Object(D.a)({},e),{},{total:(Number(e.total)-t.payload.price*t.payload.quantity).toFixed(2),cartItems:e.cartItems.filter((function(e){return e.id!==t.payload.id}))});case u:return Object(D.a)(Object(D.a)({},e),{},{total:(Number(e.total)+t.payload.change*Number(t.payload.price)).toFixed(2),cartItems:e.cartItems.map((function(e){return e.id===t.payload.id?Object(D.a)(Object(D.a)({},e),{},{quantity:Number(e.quantity)+t.payload.change}):e}))});default:return e}}),Object(C.a)(B));B.run(S);c(71);r.a.render(Object(O.jsx)(i.a,{store:P,children:Object(O.jsx)(g,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.bcbb8b14.chunk.js.map